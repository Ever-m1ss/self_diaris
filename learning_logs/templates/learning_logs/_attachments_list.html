{#
  Reusable attachments list.
  Expects:
    - attachments: iterable of Attachment
    - parent_owner: User (owner of the parent object), used to decide delete visibility
  Uses global `user` from context.
#}
<ul class="ll-attachment-list list-unstyled mb-0">
  {% for a in attachments %}
    {% if a.is_public or a.owner == user or user == parent_owner %}
      <li class="ll-attachment-item d-flex align-items-center justify-content-between py-2 border-bottom" data-id="{{ a.id }}">
        <div class="d-flex align-items-center gap-3 flex-grow-1">
          <div class="ll-attach-icon text-muted">ðŸ“Ž</div>
          <div class="ll-attach-meta">
            <div class="fw-semibold">
              {% if a.is_text_like %}
                <a href="{% url 'learning_logs:preview_attachment' a.id %}">{{ a.original_name }}</a>
              {% else %}
                <a href="{{ a.file.url }}" target="_blank" rel="noreferrer">{{ a.original_name }}</a>
              {% endif %}
              {% if a.relative_path %}<span class="text-muted small">({{ a.relative_path }})</span>{% endif %}
            </div>
            <div class="small text-muted">{{ a.size }} bytes Â· {{ a.uploaded_at|date:'Y-m-d H:i' }}</div>
          </div>
        </div>
        <div class="d-flex align-items-center gap-3 flex-shrink-0">
          <a class="small" href="{{ a.file.url }}" download>ä¸‹è½½</a>
          {% if user == parent_owner or user == a.owner %}
            <button class="btn btn-sm btn-link text-danger ll-attach-del" data-id="{{ a.id }}">åˆ é™¤</button>
          {% endif %}
        </div>
      </li>
    {% endif %}
  {% empty %}
    <li class="text-muted py-2">æš‚æ— é™„ä»¶</li>
  {% endfor %}
</ul>
