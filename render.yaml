services:
  - type: web
    name: diary-django
    env: python
    plan: free
    buildCommand: |
      pip install -r requirements.txt
      python manage.py collectstatic --noinput
    startCommand: gunicorn ll_project.wsgi --workers=2 --bind=0.0.0.0:$PORT --timeout 120
    envVars:
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "False"
      - key: DATABASE_URL
        sync: false  # 在 Render 上手动或通过依赖注入设置
    autoDeploy: true
    healthCheckPath: /
    
# 可选：创建托管 Postgres，并把 DATABASE_URL 注入上面的服务
# databases:
#   - name: diary-db
#     plan: free
#     ipAllowList: []
#     postgresMajorVersion: 15
#     # 在 Render 控制台将该数据库作为依赖添加到上面的 Web 服务以自动注入 DATABASE_URL
